import React from 'react';
import { I18nManager, ViewStyle } from 'react-native';
import Svg, { ClipPath, Defs, Path, Rect } from 'react-native-svg';

export type StarIconProps = {
  index: number;
  size: number;
  color: string;
  type: 'full' | 'half' | 'empty';
};

const StarBorder = ({ size, color }: Omit<StarIconProps, 'type'>) => (
  <Svg height={size} viewBox="0 0 34 34" width={size}>
    <Path
      d="M14.9238 1.21684C14.9362 1.19426 14.9471 1.18666 14.9542 1.18261C14.9643 1.17688 14.9801 1.17173 15 1.17173C15.0199 1.17173 15.0357 1.17688 15.0458 1.18261C15.0529 1.18666 15.0638 1.19426 15.0762 1.21684L18.8801 8.14583L19.7567 7.66459L18.8801 8.14583C19.1799 8.69182 19.7078 9.07539 20.3197 9.19174L28.085 10.6683C28.1103 10.6731 28.1209 10.6811 28.127 10.6867C28.1355 10.6945 28.1453 10.7079 28.1515 10.7268C28.1576 10.7457 28.1576 10.7623 28.1553 10.7737C28.1536 10.7818 28.1498 10.7945 28.1321 10.8133L22.7177 16.5721C22.2911 17.0259 22.0894 17.6466 22.1679 18.2645L23.1632 26.106C23.1664 26.1316 23.1621 26.1441 23.1587 26.1516C23.1539 26.1622 23.1441 26.1756 23.1281 26.1873C23.112 26.199 23.0962 26.2041 23.0846 26.2054C23.0765 26.2063 23.0632 26.2066 23.0399 26.1956L15.8897 22.8258C15.3263 22.5603 14.6737 22.5603 14.1103 22.8258L6.96013 26.1956C6.93682 26.2066 6.92353 26.2063 6.91536 26.2054C6.90382 26.2041 6.88802 26.199 6.87195 26.1873C6.85587 26.1756 6.84612 26.1622 6.84132 26.1516C6.83792 26.1441 6.83355 26.1316 6.8368 26.106L7.83214 18.2645C7.91057 17.6466 7.70892 17.0259 7.28228 16.5722L1.86788 10.8133C1.85023 10.7945 1.84638 10.7818 1.84474 10.7737C1.84241 10.7623 1.8424 10.7457 1.84854 10.7268C1.85468 10.7079 1.86445 10.6945 1.87302 10.6867C1.87909 10.6811 1.88968 10.6731 1.91499 10.6683L9.68032 9.19174C10.2922 9.07539 10.8201 8.69182 11.1199 8.14583L14.9238 1.21684Z"
      fill="none"
      stroke={color}
      strokeWidth="2"
      strokeLinecap="round"
    />
  </Svg>
);

const StarFull = ({ size, color }: Omit<StarIconProps, 'type'>) => (
  <Svg height={size} viewBox="0 0 34 34" width={size}>
    <Path
      fill={color}
      d="M14.9238 1.21684C14.9362 1.19426 14.9471 1.18666 14.9542 1.18261C14.9643 1.17688 14.9801 1.17173 15 1.17173C15.0199 1.17173 15.0357 1.17688 15.0458 1.18261C15.0529 1.18666 15.0638 1.19426 15.0762 1.21684L18.8801 8.14583L19.7567 7.66459L18.8801 8.14583C19.1799 8.69182 19.7078 9.07539 20.3197 9.19174L28.085 10.6683C28.1103 10.6731 28.1209 10.6811 28.127 10.6867C28.1355 10.6945 28.1453 10.7079 28.1515 10.7268C28.1576 10.7457 28.1576 10.7623 28.1553 10.7737C28.1536 10.7818 28.1498 10.7945 28.1321 10.8133L22.7177 16.5721C22.2911 17.0259 22.0894 17.6466 22.1679 18.2645L23.1632 26.106C23.1664 26.1316 23.1621 26.1441 23.1587 26.1516C23.1539 26.1622 23.1441 26.1756 23.1281 26.1873C23.112 26.199 23.0962 26.2041 23.0846 26.2054C23.0765 26.2063 23.0632 26.2066 23.0399 26.1956L15.8897 22.8258C15.3263 22.5603 14.6737 22.5603 14.1103 22.8258L6.96013 26.1956C6.93682 26.2066 6.92353 26.2063 6.91536 26.2054C6.90382 26.2041 6.88802 26.199 6.87195 26.1873C6.85587 26.1756 6.84612 26.1622 6.84132 26.1516C6.83792 26.1441 6.83355 26.1316 6.8368 26.106L7.83214 18.2645C7.91057 17.6466 7.70892 17.0259 7.28228 16.5722L1.86788 10.8133C1.85023 10.7945 1.84638 10.7818 1.84474 10.7737C1.84241 10.7623 1.8424 10.7457 1.84854 10.7268C1.85468 10.7079 1.86445 10.6945 1.87302 10.6867C1.87909 10.6811 1.88968 10.6731 1.91499 10.6683L9.68032 9.19174C10.2922 9.07539 10.8201 8.69182 11.1199 8.14583L14.9238 1.21684Z"
      stroke={color}
      strokeWidth="2"
      strokeLinecap="round"
    />
  </Svg>
);

const StarHalf = ({ size, color }: Omit<StarIconProps, 'type'>) => (
  <Svg
    height={size}
    viewBox="0 0 34 34"
    width={size}
    style={I18nManager.isRTL ? RTL_TRANSFORM : undefined}
  >
    <Defs>
      <ClipPath id="halfClip">
        <Rect x="0" y="0" width="16" height="34" />
      </ClipPath>
    </Defs>
   
    {/* Закрашенная половина звезды */}
    <Path
      d="M15 1.17173L14.9542 1.18261C14.9471 1.18666 14.9362 1.19426 14.9238 1.21684L11.1199 8.14583C10.8201 8.69182 10.2922 9.07539 9.68032 9.19174L1.91499 10.6683C1.88968 10.6731 1.87909 10.6811 1.87302 10.6867C1.86445 10.6945 1.85468 10.7079 1.84854 10.7268C1.8424 10.7457 1.84241 10.7623 1.84474 10.7737C1.84638 10.7818 1.85023 10.7945 1.86788 10.8133L7.28228 16.5722C7.70892 17.0259 7.91057 17.6466 7.83214 18.2645L6.8368 26.106C6.83355 26.1316 6.83792 26.1441 6.84132 26.1516C6.84612 26.1622 6.85587 26.1756 6.87195 26.1873C6.88802 26.199 6.90382 26.2041 6.91536 26.2054C6.92353 26.2063 6.93682 26.2066 6.96013 26.1956L14.1103 22.8258C14.6737 22.5603 15.3263 22.5603 15.8897 22.8258L23.0399 26.1956C23.0632 26.2066 23.0765 26.2063 23.0846 26.2054C23.0962 26.2041 23.112 26.199 23.1281 26.1873C23.1441 26.1756 23.1539 26.1622 23.1587 26.1516C23.1621 26.1441 23.1664 26.1316 23.1632 26.106L22.1679 18.2645C22.0894 17.6466 22.2911 17.0259 22.7177 16.5721L28.1321 10.8133C28.1498 10.7945 28.1536 10.7818 28.1553 10.7737C28.1576 10.7623 28.1576 10.7457 28.1515 10.7268C28.1453 10.7079 28.1355 10.6945 28.127 10.6867C28.1209 10.6811 28.1103 10.6731 28.085 10.6683L20.3197 9.19174C19.7078 9.07539 19.1799 8.69182 18.8801 8.14583L15 1.17173Z"
      fill={color}
       clipPath="url(#halfClip)"
    />
     {/* Полностью обведенная звезда */}
     <Path
      d="M14.9238 1.21684C14.9362 1.19426 14.9471 1.18666 14.9542 1.18261C14.9643 1.17688 14.9801 1.17173 15 1.17173C15.0199 1.17173 15.0357 1.17688 15.0458 1.18261C15.0529 1.18666 15.0638 1.19426 15.0762 1.21684L18.8801 8.14583L19.7567 7.66459L18.8801 8.14583C19.1799 8.69182 19.7078 9.07539 20.3197 9.19174L28.085 10.6683C28.1103 10.6731 28.1209 10.6811 28.127 10.6867C28.1355 10.6945 28.1453 10.7079 28.1515 10.7268C28.1576 10.7457 28.1576 10.7623 28.1553 10.7737C28.1536 10.7818 28.1498 10.7945 28.1321 10.8133L22.7177 16.5721C22.2911 17.0259 22.0894 17.6466 22.1679 18.2645L23.1632 26.106C23.1664 26.1316 23.1621 26.1441 23.1587 26.1516C23.1539 26.1622 23.1441 26.1756 23.1281 26.1873C23.112 26.199 23.0962 26.2041 23.0846 26.2054C23.0765 26.2063 23.0632 26.2066 23.0399 26.1956L15.8897 22.8258C15.3263 22.5603 14.6737 22.5603 14.1103 22.8258L6.96013 26.1956C6.93682 26.2066 6.92353 26.2063 6.91536 26.2054C6.90382 26.2041 6.88802 26.199 6.87195 26.1873C6.85587 26.1756 6.84612 26.1622 6.84132 26.1516C6.83792 26.1441 6.83355 26.1316 6.8368 26.106L7.83214 18.2645C7.91057 17.6466 7.70892 17.0259 7.28228 16.5722L1.86788 10.8133C1.85023 10.7945 1.84638 10.7818 1.84474 10.7737C1.84241 10.7623 1.8424 10.7457 1.84854 10.7268C1.85468 10.7079 1.86445 10.6945 1.87302 10.6867C1.87909 10.6811 1.88968 10.6731 1.91499 10.6683L9.68032 9.19174C10.2922 9.07539 10.8201 8.69182 11.1199 8.14583L14.9238 1.21684Z"
      fill="none"
      stroke={color}
      strokeWidth="2"
      
    />
  </Svg>
);

const RTL_TRANSFORM: ViewStyle = {
  transform: [{ rotateY: '180deg' }],
};

const StarSvgIcon = ({ index, type, size, color }: StarIconProps) => {
  const Component =
    type === 'full' ? StarFull : type === 'half' ? StarHalf : StarBorder;

  return <Component index={index} size={size} color={color} />;
};

export default StarSvgIcon;
